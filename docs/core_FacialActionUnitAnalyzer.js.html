<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: core/FacialActionUnitAnalyzer.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: core/FacialActionUnitAnalyzer.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const { ESRCPoint2f, ESRCFacialLandmark, ESRCFacialActionUnit } = require("../ESRCType.js");

/**
 * FacialActionUnitAnalyzer class.
 * 
 * @author Hyunwoo Lee &lt;lhw4846@esrc.co.kr>
 * @license Copyright (c) 2022 Emotion Science Research Center all rights reserved.
 */
class FacialActionUnitAnalyzer {
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU1 left.
     * @static
     */
    static AU1_LEFT_INDEX = [18, 19, 20, 21];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU1 right.
     * @static
     */
    static AU1_RIGHT_INDEX = [22, 23, 24, 25];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU2 left.
     * @static
     */
    static AU2_LEFT_INDEX = [17, 18, 19];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU2 right.
     * @static
     */
    static AU2_RIGHT_INDEX = [24, 25, 26];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU4 mid.
     * @static
     */
    static AU4_MID_INDEX = [17, 18, 25, 26];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU5 left.
     * @static
     */
    static AU5_LEFT_INDEX = [36, 37, 38, 39];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU5 right.
     * @static
     */
    static AU5_RIGHT_INDEX = [42, 43, 44, 45];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU6 left.
     * @static
     */
    static AU6_LEFT_INDEX = [41, 2, 31];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU6 right.
     * @static
     */
    static AU6_RIGHT_INDEX = [46, 13, 35];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU7 left.
     * @static
     */
    static AU7_LEFT_INDEX = [36, 38, 39, 41];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU7 right.
     * @static
     */
    static AU7_RIGHT_INDEX = [42, 43, 45, 46];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU9 left.
     * @static
     */
    static AU9_LEFT_INDEX = [30, 31, 33];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU9 right.
     * @static
     */
    static AU9_RIGHT_INDEX = [30, 33, 35];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU10 mid.
     * @static
     */
    static AU10_MID_INDEX = [31, 49 ,52, 53, 35];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU11 mid.
     * @static
     */
    static AU11_MID_INDEX = [31, 29, 35, 30];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU12 left.
     * @static
     */
    static AU12_LEFT_INDEX = [3, 48, 31];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU12 right.
     * @static
     */
    static AU12_RIGHT_INDEX = [30, 33, 35];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU14 left.
     * @static
     */
    static AU14_LEFT_INDEX = [3, 4, 48, 31];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU14 right.
     * @static
     */
    static AU14_RIGHT_INDEX = [12, 13, 35, 54];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU15 left.
     * @static
     */
    static AU15_LEFT_INDEX = [4, 6, 48];
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU15 right.
     * @static
     */
    static AU15_RIGHT_INDEX = [12, 54, 10]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU16 mid.
     * @static
     */
    static AU16_MID_INDEX = [59, 6, 7, 8, 9, 10, 55, 56, 57, 58]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU18 mid.
     * @static
     */
    static AU18_MID_INDEX = [60, 67, 66, 65, 64, 63, 62, 61]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU20 left.
     * @static
     */
    static AU20_LEFT_INDEX = [3, 4, 5, 48]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU20 right.
     * @static
     */
    static AU20_RIGHT_INDEX = [11, 12, 13, 54]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU21 mid.
     * @static
     */
    static AU21_MID_INDEX = [57, 6, 7, 8, 9, 10]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU22 mid.
     * @static
     */
    static AU22_MID_INDEX = [50, 58, 56, 52]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU25 mid.
     * @static
     */
    static AU25_MID_INDEX = [61, 66, 63, 65, 62, 67]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU26 mid.
     * @static
     */
    static AU26_MID_INDEX = [6, 8, 10, 57]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU27 mid.
     * @static
     */
    static AU27_MID_INDEX = [48, 6, 10, 54]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU28 mid.
     * @static
     */
    static AU28_MID_INDEX = [48, 57, 54, 51]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU29 mid.
     * @static
     */
    static AU29_MID_INDEX = [58, 7, 9, 56]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU30 mid.
     * @static
     */
    static AU30_MID_INDEX = [3, 7, 9, 13]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU35 left.
     * @static
     */
    static AU35_LEFT_INDEX = [2, 4, 31]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU35 right.
     * @static
     */
    static AU35_RIGHT_INDEX = [12, 14, 35]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU38 left.
     * @static
     */
    static AU38_LEFT_INDEX = [31, 32, 30]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU38 right.
     * @static
     */
    static AU38_RIGHT_INDEX = [34, 35, 30]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU43 left.
     * @static
     */
    static AU43_LEFT_INDEX = [36, 37, 38, 39, 40, 41]
    /**
     * @constant
     * @type {Array.&lt;number>}
     * @description Constant for indices of AU43 right.
     * @static
     */
    static AU43_RIGHT_INDEX = [42, 43, 44, 45, 46, 47]

    /**
     * @property {onAnalyzedFacialActionUnitCallback} onAnalyzedFacialActionUnitCallback A callback for when facial action unit is analyzed.
     */
    onAnalyzedFacialActionUnitCallback;
    /**
     * @property {boolean} enableFacialActionUnit Whether analyze facial action unit or not.
     */
    enableFacialActionUnit = false;

    /**
     * @property {ESRCFacialActionUnit} facialActionUnit ESRCFacialActionUnit instnace.
     */
    facialActionUnit;
    /**
     * @property {Array.&lt;number>} normalizedLandmarkX Normalized X positions of facial landmarks.
     */
    normalizedLandmarkX;
    /**
     * @property {Array.&lt;number>} normalizedLandmarkY Normalized Y positions of facial landmarks.
     */
    normalizedLandmarkY;

    /**
     * FacialActionUnitAnalyzer constructor.
     * @param {callback} onAnalyzedFacialActionUnitCallback A callback for when facial action unit is analyzed.
     */
    constructor(onAnalyzedFacialActionUnitCallback) {
        // Set handler
        this.onAnalyzedFacialActionUnitCallback = onAnalyzedFacialActionUnitCallback ?? undefined;

        // Initialize variables
        this.facialActionUnit = new ESRCFacialActionUnit();
        this.normalizedLandmarkX = Array(ESRCFacialLandmark.FACIAL_LANDMARK_COUNT).fill(0);
        this.normalizedLandmarkY = Array(ESRCFacialLandmark.FACIAL_LANDMARK_COUNT).fill(0);
    }

    /**
     * Initializes facial action unit analyzer.
     * @param {boolean} enableFacialActionUnit Whether analyze facial action unit or not.
     * @returns {boolean} Returns true if the initialization succeeded. Otherwise, false.
     */
    initialize(enableFacialActionUnit) {
        var ret = true;

        // Set property
        this.enableFacialActionUnit = enableFacialActionUnit;

        return ret;
    }

    /**
     * Releases facial action unit analyzer.
     * @returns {boolean} Returns true if the release succeeded. Otherwise, false.
     */
    release() {
        var ret = true;

        // Nothing

        return ret;
    }

    /**
     * Feed facial landmark on facial action unit task.
     * @param {ESRCFacialLandmark} facialLandmark ESRCFacialLandmark instance.
     */
    feed(facialLandmark) {
        if (this.enableFacialActionUnit) {
            // Normalize coordinate
            this.normalizeCoordinate(facialLandmark.getXPositions(), facialLandmark.getYPositions());
            
            // Analyze centroid
            this.analyzeCentroid();

            // Analyze area
            this.analyzeArea();

            // Set id
            this.facialActionUnit.setId(facialLandmark.getId());

            // Callback
            if (this.onAnalyzedFacialActionUnitCallback !== undefined) {
                this.onAnalyzedFacialActionUnitCallback(this.facialActionUnit);
            }
        }
    }

    /**
     * Normalize coordinate of facial landmarks.
     * @param {Array.&lt;number>} shapeX X positions of facial landmarks.
     * @param {Array.&lt;number>}shapeY Y positions of facial landmarks.
     */
    normalizeCoordinate(shapeX, shapeY) {
        var minmaxX;
        var minmaxY;
        var relativeX;
        var relativeY;

        // Calculate min and max values for min-max normalization
        var minX = shapeX[0];
        var maxX = shapeX[0];
        var minY = shapeY[0];
        var maxY = shapeY[0];
        for (let i = 0; i &lt; ESRCFacialLandmark.FACIAL_LANDMARK_COUNT; i++) {
            if (minX > shapeX[i]) {
                minX = shapeX[i];
            }

            if (maxX &lt; shapeX[i]) {
                maxX = shapeX[i];
            }

            if (minY > shapeY[i]) {
                minY = shapeY[i];
            }

            if (maxY &lt; shapeY[i]) {
                maxY = shapeY[i];
            }
        }

        // Normalize landmark by min and max values
        for (let i = 0; i &lt; ESRCFacialLandmark.FACIAL_LANDMARK_COUNT; i++) {
            minmaxX = ((shapeX[i] - minX) / (maxX - minX) - 0.5) * 2;
            minmaxY = ((shapeY[i] - minY) / (maxY - minY) - 0.5) * 2;
            this.normalizedLandmarkX[i] = minmaxX;
            this.normalizedLandmarkY[i] = minmaxY;
        }

        // Calculate glabella
        let glabellaX = (this.normalizedLandmarkX[39] + this.normalizedLandmarkX[42]) / 2.0
        let glabellaY = (this.normalizedLandmarkY[39] + this.normalizedLandmarkY[42]) / 2.0

        // Normalize landmark by glabella
        for (let i = 0; i &lt; ESRCFacialLandmark.FACIAL_LANDMARK_COUNT; i++) {
            relativeX = this.normalizedLandmarkX[i] - glabellaX;
            relativeY = this.normalizedLandmarkY[i] - glabellaY;
            this.normalizedLandmarkX[i] = relativeX;
            this.normalizedLandmarkY[i] = relativeY;
        }
    }

    /**
     * Calculate centroid given by indices of AU.
     * @param {Array.&lt;number>} auIndices indices of AU.
     * @returns {ESRCPoint2f} Centroid of AU.
     */
    calculateCentroid(auIndices) {
        var centroid = new ESRCPoint2f();
        var centroidX = 0.0;
        var centroidY = 0.0;
        var signedArea = 0.0;
        var x0;
        var y0;
        var x1;
        var y1;
        var a ;

        for (let i = 0; i &lt; auIndices.length - 1; i++) {
            x0 = this.normalizedLandmarkX[auIndices[i]];
            y0 = this.normalizedLandmarkY[auIndices[i]];
            x1 = this.normalizedLandmarkX[auIndices[i + 1]];
            y1 = this.normalizedLandmarkY[auIndices[i + 1]];
            a = x0 * y1 - x1 * y0;
            signedArea += a;
            centroidX += (x0 * x1) * a;
            centroidY += (y0 * y1) * a;
        }

        // Do last point
        x0 = this.normalizedLandmarkX[auIndices[auIndices.length - 1]];
        y0 = this.normalizedLandmarkY[auIndices[auIndices.length - 1]];
        x1 = this.normalizedLandmarkX[auIndices[0]];
        y1 = this.normalizedLandmarkY[auIndices[0]];
        a = x0 * y1 - x1 * y0;
        signedArea += a;
        centroidX += (x0 * x1) * a;
        centroidY += (y0 * y1) * a;

        // Calculate centroid
        signedArea *= 0.5;
        if (signedArea == 0) {
            signedArea = 1;
        }
        centroidX /= (6.0 * signedArea + 0.00001);
        centroidY /= (6.0 * signedArea + 0.00001);
        centroid.setX(centroidX);
        centroid.setY(centroidY);

        return centroid;
    }

    /**
     * Calculate area given by indices of AU.
     * @param {Array.&lt;number>} auIndices indices of AU.
     * @returns {number} Area of AU.
     */
    calculateArea(auIndices) {
        var centroidX = 0.0;
        var centroidY = 0.0;
        var signedArea = 0.0;
        var x0;
        var y0;
        var x1;
        var y1;
        var a ;

        for (let i = 0; i &lt; auIndices.length - 1; i++) {
            x0 = this.normalizedLandmarkX[auIndices[i]];
            y0 = this.normalizedLandmarkY[auIndices[i]];
            x1 = this.normalizedLandmarkX[auIndices[i + 1]];
            y1 = this.normalizedLandmarkY[auIndices[i + 1]];
            a = x0 * y1 - x1 * y0;
            signedArea += a;
            centroidX += (x0 * x1) * a;
            centroidY += (y0 * y1) * a;
        }

        // Do last point
        x0 = this.normalizedLandmarkX[auIndices[auIndices.length - 1]];
        y0 = this.normalizedLandmarkY[auIndices[auIndices.length - 1]];
        x1 = this.normalizedLandmarkX[auIndices[0]];
        y1 = this.normalizedLandmarkY[auIndices[0]];
        a = x0 * y1 - x1 * y0;
        signedArea += a;
        centroidX += (x0 * x1) * a;
        centroidY += (y0 * y1) * a;

        // Calculate area
        signedArea *= 0.5;
    
        return signedArea;
    }

    /**
     * Analyze centroids of all AU.
     */
    analyzeCentroid() {
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_1_LEFT, this.calculateCentroid(FacialActionUnitAnalyzer.AU1_LEFT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_1_RIGHT, this.calculateCentroid(FacialActionUnitAnalyzer.AU1_RIGHT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_1_RIGHT, this.calculateCentroid(FacialActionUnitAnalyzer.AU1_RIGHT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_2_LEFT, this.calculateCentroid(FacialActionUnitAnalyzer.AU2_LEFT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_2_RIGHT, this.calculateCentroid(FacialActionUnitAnalyzer.AU2_RIGHT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_4_MID, this.calculateCentroid(FacialActionUnitAnalyzer.AU4_MID_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_5_LEFT, this.calculateCentroid(FacialActionUnitAnalyzer.AU5_LEFT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_5_RIGHT, this.calculateCentroid(FacialActionUnitAnalyzer.AU5_RIGHT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_6_LEFT, this.calculateCentroid(FacialActionUnitAnalyzer.AU6_LEFT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_6_RIGHT, this.calculateCentroid(FacialActionUnitAnalyzer.AU6_RIGHT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_7_LEFT, this.calculateCentroid(FacialActionUnitAnalyzer.AU7_LEFT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_7_RIGHT, this.calculateCentroid(FacialActionUnitAnalyzer.AU7_RIGHT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_9_LEFT, this.calculateCentroid(FacialActionUnitAnalyzer.AU9_LEFT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_9_RIGHT, this.calculateCentroid(FacialActionUnitAnalyzer.AU9_RIGHT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_10_MID, this.calculateCentroid(FacialActionUnitAnalyzer.AU10_MID_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_11_MID, this.calculateCentroid(FacialActionUnitAnalyzer.AU11_MID_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_12_LEFT, this.calculateCentroid(FacialActionUnitAnalyzer.AU12_LEFT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_12_RIGHT, this.calculateCentroid(FacialActionUnitAnalyzer.AU12_RIGHT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_14_LEFT, this.calculateCentroid(FacialActionUnitAnalyzer.AU14_LEFT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_14_RIGHT, this.calculateCentroid(FacialActionUnitAnalyzer.AU14_RIGHT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_15_LEFT, this.calculateCentroid(FacialActionUnitAnalyzer.AU15_LEFT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_15_RIGHT, this.calculateCentroid(FacialActionUnitAnalyzer.AU15_RIGHT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_16_MID, this.calculateCentroid(FacialActionUnitAnalyzer.AU16_MID_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_18_MID, this.calculateCentroid(FacialActionUnitAnalyzer.AU18_MID_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_20_LEFT, this.calculateCentroid(FacialActionUnitAnalyzer.AU20_LEFT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_20_RIGHT, this.calculateCentroid(FacialActionUnitAnalyzer.AU20_RIGHT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_21_MID, this.calculateCentroid(FacialActionUnitAnalyzer.AU21_MID_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_22_MID, this.calculateCentroid(FacialActionUnitAnalyzer.AU22_MID_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_25_MID, this.calculateCentroid(FacialActionUnitAnalyzer.AU25_MID_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_26_MID, this.calculateCentroid(FacialActionUnitAnalyzer.AU26_MID_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_27_MID, this.calculateCentroid(FacialActionUnitAnalyzer.AU27_MID_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_28_MID, this.calculateCentroid(FacialActionUnitAnalyzer.AU28_MID_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_29_MID, this.calculateCentroid(FacialActionUnitAnalyzer.AU29_MID_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_30_MID, this.calculateCentroid(FacialActionUnitAnalyzer.AU30_MID_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_35_LEFT, this.calculateCentroid(FacialActionUnitAnalyzer.AU35_LEFT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_35_RIGHT, this.calculateCentroid(FacialActionUnitAnalyzer.AU35_RIGHT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_38_LEFT, this.calculateCentroid(FacialActionUnitAnalyzer.AU38_LEFT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_38_RIGHT, this.calculateCentroid(FacialActionUnitAnalyzer.AU38_RIGHT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_43_LEFT, this.calculateCentroid(FacialActionUnitAnalyzer.AU43_LEFT_INDEX));
        this.facialActionUnit.setCentroid(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_43_RIGHT, this.calculateCentroid(FacialActionUnitAnalyzer.AU43_RIGHT_INDEX));
    }

    /**
     * Analyze area of all AU.
     */
    analyzeArea() {
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_1_LEFT, this.calculateArea(FacialActionUnitAnalyzer.AU1_LEFT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_1_RIGHT, this.calculateArea(FacialActionUnitAnalyzer.AU1_RIGHT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_2_LEFT, this.calculateArea(FacialActionUnitAnalyzer.AU2_LEFT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_2_RIGHT, this.calculateArea(FacialActionUnitAnalyzer.AU2_RIGHT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_4_MID, this.calculateArea(FacialActionUnitAnalyzer.AU4_MID_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_5_LEFT, this.calculateArea(FacialActionUnitAnalyzer.AU5_LEFT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_5_RIGHT, this.calculateArea(FacialActionUnitAnalyzer.AU5_RIGHT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_6_LEFT, this.calculateArea(FacialActionUnitAnalyzer.AU6_LEFT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_6_RIGHT, this.calculateArea(FacialActionUnitAnalyzer.AU6_RIGHT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_7_LEFT, this.calculateArea(FacialActionUnitAnalyzer.AU7_LEFT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_7_RIGHT, this.calculateArea(FacialActionUnitAnalyzer.AU7_RIGHT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_9_LEFT, this.calculateArea(FacialActionUnitAnalyzer.AU9_LEFT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_9_RIGHT, this.calculateArea(FacialActionUnitAnalyzer.AU9_RIGHT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_10_MID, this.calculateArea(FacialActionUnitAnalyzer.AU10_MID_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_11_MID, this.calculateArea(FacialActionUnitAnalyzer.AU11_MID_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_12_LEFT, this.calculateArea(FacialActionUnitAnalyzer.AU12_LEFT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_12_RIGHT, this.calculateArea(FacialActionUnitAnalyzer.AU12_RIGHT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_14_LEFT, this.calculateArea(FacialActionUnitAnalyzer.AU14_LEFT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_14_RIGHT, this.calculateArea(FacialActionUnitAnalyzer.AU14_RIGHT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_15_LEFT, this.calculateArea(FacialActionUnitAnalyzer.AU15_LEFT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_15_RIGHT, this.calculateArea(FacialActionUnitAnalyzer.AU15_RIGHT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_16_MID, this.calculateArea(FacialActionUnitAnalyzer.AU16_MID_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_18_MID, this.calculateArea(FacialActionUnitAnalyzer.AU18_MID_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_20_LEFT, this.calculateArea(FacialActionUnitAnalyzer.AU20_LEFT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_20_RIGHT, this.calculateArea(FacialActionUnitAnalyzer.AU20_RIGHT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_21_MID, this.calculateArea(FacialActionUnitAnalyzer.AU21_MID_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_22_MID, this.calculateArea(FacialActionUnitAnalyzer.AU22_MID_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_25_MID, this.calculateArea(FacialActionUnitAnalyzer.AU25_MID_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_26_MID, this.calculateArea(FacialActionUnitAnalyzer.AU26_MID_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_27_MID, this.calculateArea(FacialActionUnitAnalyzer.AU27_MID_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_28_MID, this.calculateArea(FacialActionUnitAnalyzer.AU28_MID_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_29_MID, this.calculateArea(FacialActionUnitAnalyzer.AU29_MID_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_30_MID, this.calculateArea(FacialActionUnitAnalyzer.AU30_MID_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_35_LEFT, this.calculateArea(FacialActionUnitAnalyzer.AU35_LEFT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_35_RIGHT, this.calculateArea(FacialActionUnitAnalyzer.AU35_RIGHT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_38_LEFT, this.calculateArea(FacialActionUnitAnalyzer.AU38_LEFT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_38_RIGHT, this.calculateArea(FacialActionUnitAnalyzer.AU38_RIGHT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_43_LEFT, this.calculateArea(FacialActionUnitAnalyzer.AU43_LEFT_INDEX));
        this.facialActionUnit.setArea(ESRCFacialActionUnit.FACIAL_ACTION_UNIT_43_RIGHT, this.calculateArea(FacialActionUnitAnalyzer.AU43_RIGHT_INDEX));
    }
}

/**
 * A callback for when facial action unit is analyzed.
 * @callback onAnalyzedFacialActionUnitCallback
 * @param {ESRCFacialActionUnit} facialActionUnit Facial action unit.
 */
function onAnalyzedFacialActionUnitCallback(facialActionUnit) {
    // Implement this function.
};

module.exports = FacialActionUnitAnalyzer;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-ESRCType.html">ESRCType</a></li></ul><h3>Classes</h3><ul><li><a href="APIClient.html">APIClient</a></li><li><a href="BasicFacialExpressionRecognizer.html">BasicFacialExpressionRecognizer</a></li><li><a href="EngagementRecognizer.html">EngagementRecognizer</a></li><li><a href="ESRC.html">ESRC</a></li><li><a href="ESRCHandler.html">ESRCHandler</a></li><li><a href="ESRCLicense.html">ESRCLicense</a></li><li><a href="FaceDetector.html">FaceDetector</a></li><li><a href="FacialActionUnitAnalyzer.html">FacialActionUnitAnalyzer</a></li><li><a href="FacialLandmarkDetector.html">FacialLandmarkDetector</a></li><li><a href="FileManager.html">FileManager</a></li><li><a href="MeasureEnvAnalyzer.html">MeasureEnvAnalyzer</a></li><li><a href="module-ESRCType-ESRCAttention.html">ESRCAttention</a></li><li><a href="module-ESRCType-ESRCBasicFacialExpression.html">ESRCBasicFacialExpression</a></li><li><a href="module-ESRCType-ESRCEngagement.html">ESRCEngagement</a></li><li><a href="module-ESRCType-ESRCFace.html">ESRCFace</a></li><li><a href="module-ESRCType-ESRCFacialActionUnit.html">ESRCFacialActionUnit</a></li><li><a href="module-ESRCType-ESRCFacialLandmark.html">ESRCFacialLandmark</a></li><li><a href="module-ESRCType-ESRCHeadPose.html">ESRCHeadPose</a></li><li><a href="module-ESRCType-ESRCHRV.html">ESRCHRV</a></li><li><a href="module-ESRCType-ESRCMat.html">ESRCMat</a></li><li><a href="module-ESRCType-ESRCMeasureEnv.html">ESRCMeasureEnv</a></li><li><a href="module-ESRCType-ESRCPoint2f.html">ESRCPoint2f</a></li><li><a href="module-ESRCType-ESRCProgressRatio.html">ESRCProgressRatio</a></li><li><a href="module-ESRCType-ESRCProperty.html">ESRCProperty</a></li><li><a href="module-ESRCType-ESRCRemoteHR.html">ESRCRemoteHR</a></li><li><a href="module-ESRCType-ESRCValenceFacialExpression.html">ESRCValenceFacialExpression</a></li><li><a href="OpenCVLoader.html">OpenCVLoader</a></li><li><a href="RemoteHREstimator.html">RemoteHREstimator</a></li><li><a href="ValenceFacialExpressionRecognizer.html">ValenceFacialExpressionRecognizer</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Mon Jun 27 2022 16:21:06 GMT+0900 (대한민국 표준시)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
